(this.webpackJsonpprltaskd1=this.webpackJsonpprltaskd1||[]).push([[0],{109:function(e,t,n){"use strict";n.r(t),n.d(t,"history",(function(){return E}));var a=n(0),o=n.n(a),r=n(46),s=n.n(r),i=n(15),c=n(16),l=n(19),d=n(18),u=n(1),p=n(20),h=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)),f=(n(86),n(87),n(43)),m=n(88),g=n(89);n(103),console.log("labjswrapper being used");var v=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;Object(i.a)(this,n),console.log("LabJsWrapperconstructor"),a=t.call(this,e);var o=g.parse(a.props.location.search,{ignoreQueryPrefix:!0});return a.surveyUrl=o.survey_url,a.state={encryptedMetadata:o.id,sendingData:!1,link:void 0},m.isUndefined(a.state.encryptedMetadata)||a.addScript("/PRLtaskd1/external/lab.js",(function(){a.addScript("/PRLtaskd1/script.js")})),a}return Object(c.a)(n,[{key:"packageDataForExport",value:function(e){var t={};return console.log("packageDataForExport"),console.log(e),t.encrypted_metadata=this.state.encryptedMetadata,t.taskName=f.taskName,t.taskVersion=f.taskVersion,t.data=this.processLabJsData(e),JSON.stringify(t)}},{key:"processLabJsData",value:function(e){return e}},{key:"componentDidMount",value:function(){console.log("in compondentDidMount");var e=this,t=localStorage.getItem("taskData");t&&(console.log("taskData found in localStorage"),this.handleData(JSON.parse(t))),window.addEventListener("message",(function(t){if(console.log("in EventListener"),"labjs.data"===t.data.type){var n=JSON.parse(t.data.json);if(console.log("Wrapper got the data"),(f.debug||h)&&(console.log(n),console.log(e.processLabJsData(n))),h)return console.log("in islocalhost"),console.log(e.surveyUrl),void(e.surveyUrl&&(console.log("in that.surveyUrl"),e.setState({link:e.surveyUrl})));e.setState({sendingData:!0}),Object(p.b)(e.state.encryptedMetadata,e.packageDataForExport(n)).then((function(){console.log("sent data"),console.log(e.surveyUrl),e.surveyUrl?e.setState({link:e.surveyUrl}):Object(p.a)(e.state.encryptedMetadata).then((function(t){return e.setState({link:t})}))}))}Object(p.a)(e.state.encryptedMetadata).then((function(t){return e.setState({link:t})}))}))}},{key:"addScript",value:function(e,t){var n=document.createElement("script");n.src=e,n.type="module",n.onreadystatechange=t,n.onload=t,document.head.appendChild(n)}},{key:"render",value:function(){return m.isUndefined(this.state.encryptedMetadata)?o.a.createElement("div",null,o.a.createElement("h2",null,"Something went wrong. Please try again.")):(m.isUndefined(this.state.link)||window.location.assign(this.state.link),o.a.createElement("div",null,o.a.createElement("div",{className:"container fullscreen","data-labjs-section":"main",style:{visibility:this.state.sendingData?"hidden":"visible"}},o.a.createElement("main",{className:"content-vertical-center content-horizontal-center"})),o.a.createElement("div",{className:"center",style:{visibility:this.state.sendingData?"visible":"hidden"}},o.a.createElement("h2",null,"Saving data... do not exit window. Check internet and Refresh if stuck here for over 30 seconds."),o.a.createElement("p",null,"If you lost internet connection during the game, then the game will restart and you will need to play again."))))}}]),n}(a.Component),y=function(){return o.a.createElement(u.c,null,o.a.createElement(u.a,{path:"/",exact:!0,component:v}))},b=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(y,null))}}]),n}(a.Component),k=n(14),w=n(3),E=Object(w.a)();console.log("render react"),s.a.render(o.a.createElement(k.a,{history:E,basename:"/PRLtaskd1"},o.a.createElement(b,null)),document.getElementById("root"))},20:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return i}));var a=n(55),o=n(83),r=n(43);function s(t,n){return new Promise((function(s,i){var c=o.stringify({encrypted_metadata:t,data:n}),l={hostname:r.awsLambda.saveTaskData.host,port:443,path:r.awsLambda.saveTaskData.path,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded","Content-Length":e.byteLength(c)}},d=a.request(l,(function(e){e.setEncoding("utf8"),e.on("data",(function(){})),e.on("end",s)}));d.on("error",(function(e){r.debug&&(console.log("ERROR:"),console.log(e)),i(e)})),d.write(c),d.end()}))}function i(t){return new Promise((function(n,s){var i=o.stringify({encrypted_metadata:t}),c={hostname:r.awsLambda.fetchLink.host,port:443,path:r.awsLambda.fetchLink.path,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded","Content-Length":e.byteLength(i)}},l=a.request(c,(function(e){e.setEncoding("utf8");var t="";e.on("data",(function(e){t+=e})),e.on("end",(function(){return n(t)}))}));l.on("error",(function(e){r.debug&&(console.log("ERROR:"),console.log(e)),s(e)})),l.write(i),l.end()}))}}).call(this,n(7).Buffer)},43:function(e){e.exports=JSON.parse('{"taskVersion":"1.0.0","taskName":"prltaskd1","debug":false,"awsLambda":{"saveTaskData":{"host":"de8cnjde61.execute-api.us-east-2.amazonaws.com","path":"/default/saveTaskData"},"fetchLink":{"host":"3pnzb6n9vf.execute-api.us-east-2.amazonaws.com","path":"/default/fetchLink"}}}')},48:function(e,t,n){e.exports=n(109)},58:function(e,t){},60:function(e,t){},81:function(e,t){},86:function(e,t,n){},87:function(e,t,n){}},[[48,1,2]]]);
//# sourceMappingURL=main.03a1921a.chunk.js.map